{"version":3,"file":"graylog.js","names":["_gelfPro","require","_gelfPro2","_interopRequireDefault","obj","__esModule","default","Transport","module","exports","CustomTransport","constructor","opts","gelf","setConfig","log","info","callback","setImmediate","emit","message","JSON","stringify","level","metadata","err","bytesSent"],"sources":["../../src/transports/graylog.js"],"sourcesContent":["const Transport = require(\"winston-transport\");\nimport gelf from \"gelf-pro\";\n\nmodule.exports = class CustomTransport extends Transport {\n  constructor(opts) {\n    super(opts);\n    gelf.setConfig(opts);\n  }\n\n  log(info, callback) {\n    setImmediate(() => {\n      this.emit(\"logged\", info);\n    });\n\n    if (typeof info.message == \"object\")\n      info.message = JSON.stringify(info.message, null, 2);\n\n    gelf[info.level](info.message, info.metadata, (err, bytesSent) => {\n      callback(err);\n    });\n  }\n};\n"],"mappings":";AACA,IAAAA,QAAA,GAAAC,OAAA,aAA4B,IAAAC,SAAA,GAAAC,sBAAA,CAAAH,QAAA,WAAAG,uBAAAC,GAAA,UAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA,IAD5B,MAAMG,SAAS,GAAGN,OAAO,CAAC,mBAAmB,CAAC;;AAG9CO,MAAM,CAACC,OAAO,GAAG,MAAMC,eAAe,SAASH,SAAS,CAAC;EACvDI,WAAWA,CAACC,IAAI,EAAE;IAChB,KAAK,CAACA,IAAI,CAAC;IACXC,iBAAI,CAACC,SAAS,CAACF,IAAI,CAAC;EACtB;;EAEAG,GAAGA,CAACC,IAAI,EAAEC,QAAQ,EAAE;IAClBC,YAAY,CAAC,MAAM;MACjB,IAAI,CAACC,IAAI,CAAC,QAAQ,EAAEH,IAAI,CAAC;IAC3B,CAAC,CAAC;;IAEF,IAAI,OAAOA,IAAI,CAACI,OAAO,IAAI,QAAQ;IACjCJ,IAAI,CAACI,OAAO,GAAGC,IAAI,CAACC,SAAS,CAACN,IAAI,CAACI,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;;IAEtDP,iBAAI,CAACG,IAAI,CAACO,KAAK,CAAC,CAACP,IAAI,CAACI,OAAO,EAAEJ,IAAI,CAACQ,QAAQ,EAAE,CAACC,GAAG,EAAEC,SAAS,KAAK;MAChET,QAAQ,CAACQ,GAAG,CAAC;IACf,CAAC,CAAC;EACJ;AACF,CAAC"}