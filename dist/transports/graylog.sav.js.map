{"version":3,"file":"graylog.sav.js","names":["_winstonTransport","require","_winstonTransport2","_interopRequireDefault","_gelfPro","_gelfPro2","obj","__esModule","default","module","exports","YourCustomTransport","Transport","constructor","opts","gelf","setConfig","adapterName","adapterOptions","host","port","protocol","log","info","callback","message","JSON","stringify","level","Object","keys","config","levels","includes","_","error"],"sources":["../../src/transports/graylog.sav.js"],"sourcesContent":["import Transport from \"winston-transport\";\nimport gelf from \"gelf-pro\";\n\nmodule.exports = class YourCustomTransport extends Transport {\n  constructor(opts) {\n    super(opts);\n    gelf.setConfig({\n      adapterName: \"udp\", // optional; currently supported \"udp\", \"tcp\" and \"tcp-tls\"; default: udp\n      adapterOptions: {\n        host: opts.host, // optional; default: 127.0.0.1\n        port: opts.port, // optional; default: 12201\n        protocol: \"udp4\" // udp only; optional; udp adapter: udp4, udp6; default: udp4\n      }\n    });\n  }\n\n  async log(info, callback) {\n    try {\n      if (typeof info.message === \"object\")\n        info.message = JSON.stringify(info.message, null, 2);\n      let level = info.level;\n      if (!Object.keys(gelf.config.levels).includes(info.level)) level = \"info\";\n      gelf[level](info.message, { _: info }, callback);\n    } catch (error) {\n      callback(error);\n    }\n  }\n};\n"],"mappings":"aAAA,IAAAA,iBAAA,GAAAC,OAAA,sBAA0C,IAAAC,kBAAA,GAAAC,sBAAA,CAAAH,iBAAA;AAC1C,IAAAI,QAAA,GAAAH,OAAA,aAA4B,IAAAI,SAAA,GAAAF,sBAAA,CAAAC,QAAA,WAAAD,uBAAAG,GAAA,UAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;;AAE5BG,MAAM,CAACC,OAAO,GAAG,MAAMC,mBAAmB,SAASC,0BAAS,CAAC;EAC3DC,WAAWA,CAACC,IAAI,EAAE;IAChB,KAAK,CAACA,IAAI,CAAC;IACXC,iBAAI,CAACC,SAAS,CAAC;MACbC,WAAW,EAAE,KAAK,EAAE;MACpBC,cAAc,EAAE;QACdC,IAAI,EAAEL,IAAI,CAACK,IAAI,EAAE;QACjBC,IAAI,EAAEN,IAAI,CAACM,IAAI,EAAE;QACjBC,QAAQ,EAAE,MAAM,CAAC;MACnB;IACF,CAAC,CAAC;EACJ;;EAEA,MAAMC,GAAGA,CAACC,IAAI,EAAEC,QAAQ,EAAE;IACxB,IAAI;MACF,IAAI,OAAOD,IAAI,CAACE,OAAO,KAAK,QAAQ;MAClCF,IAAI,CAACE,OAAO,GAAGC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAACE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;MACtD,IAAIG,KAAK,GAAGL,IAAI,CAACK,KAAK;MACtB,IAAI,CAACC,MAAM,CAACC,IAAI,CAACf,iBAAI,CAACgB,MAAM,CAACC,MAAM,CAAC,CAACC,QAAQ,CAACV,IAAI,CAACK,KAAK,CAAC,EAAEA,KAAK,GAAG,MAAM;MACzEb,iBAAI,CAACa,KAAK,CAAC,CAACL,IAAI,CAACE,OAAO,EAAE,EAAES,CAAC,EAAEX,IAAI,CAAC,CAAC,EAAEC,QAAQ,CAAC;IAClD,CAAC,CAAC,OAAOW,KAAK,EAAE;MACdX,QAAQ,CAACW,KAAK,CAAC;IACjB;EACF;AACF,CAAC"}